/*!
 * Personal Website - the.void.view 
 * Author - Nitish Victor (nithishvictor@gmail.com)
*/
function type(){captionEl.html(caption.substr(0,captionLength++)),captionLength<caption.length+1?"."==caption[captionLength-2]?setTimeout(type,1500):setTimeout(type,80):(captionLength=0,caption="",doneTypingCallback())}function typeFallSeven(){caption="Fall Seven. Rise Eight",type()}function cursorAnimation(){$("#cursor").animate({opacity:0},"fast","swing").animate({opacity:1},"fast","swing")}function doneTypingCallback(){console.log("Done Typing..."),getCurrentPage()!=landingPage||typingCallbackCalled||(typingCallbackCalled=!0,setTimeout(routeTo.bind(routeTo,menuPage,landingPage),800))}var landingPage="home",menuPage="menu",projectPage="project",dancePage="dance",aboutPage="about",miscPage="misc",pageIds=[landingPage,menuPage,projectPage,"misc","about","dance"],pageHandlers={},basicHandler={onKeyPress:function(){},onUpScroll:function(){},onDownScroll:function(){},onPageResize:function(){}};pageIds.forEach(function(e){pageHandlers[e]=basicHandler});var customLogicPostLoad=[],customLogicPreLoad=[],registerCustomFunctionPostPageLoad=function(e){return"function"!=typeof e?void console.error("Cannot register non-function"):void customLogicPostLoad.push(e)},registerCustomFunctionPrePageLoad=function(e){return"function"!=typeof e?void console.error("Cannot register non-function"):void customLogicPreLoad.push(e)};window.onpopstate=function(e){console.log(window.history),console.log(e)};var removeLoader=function(){$("#loaderPage").fadeOut(400,function(e){$("#loaderPage").remove()})};window.onhashchange=function(){console.log("Hash change",getCurrentPage()),routeToSlideUp(null==getCurrentPage()||""==getCurrentPage()?landingPage:getCurrentPage()),removeLoader()};var onLoad=function(){directLoad(null==getCurrentPage()?landingPage:getCurrentPage()),runOnPageLoadFunctions(),removeLoader(),runOnPagePostLoadFunctions(),pageIds.forEach(function(e){})},onProjectPageLoad=function(){console.log("Loaded page 3")},onMenuPageLoad=function(){console.log("Loaded menu page")},pageRefreshPipeline=[],pagePostLoaders=[],registerOnPageLoad=function(e,n){pageRefreshPipeline[e]=n},registerPagePostLoad=function(e,n){pagePostLoaders[e]=n},runOnPageLoadFunctions=function(){customLogicPreLoad.forEach(function(e){e()}),$("#footer").fadeIn("slow"),pageRefreshPipeline[getCurrentPage()]&&pageRefreshPipeline[getCurrentPage()](),customLogicPostLoad.forEach(function(e){e()})},runOnPagePostLoadFunctions=function(){pagePostLoaders[getCurrentPage()]&&pagePostLoaders[getCurrentPage()]()};registerCustomFunctionPostPageLoad(function(){switch(getCurrentPage()){case"menu":case"home":$("#main-menu").hide();break;default:$("#main-menu").fadeIn("slow")}}),registerCustomFunctionPrePageLoad(function(){getCurrentPage()==aboutPage&&console.log("fadein")}),registerOnPageLoad(landingPage,function(){$("#footer").hide(),$("#main-menu").hide(),setTimeout(typeFallSeven,2e3)}),registerOnPageLoad(projectPage,onProjectPageLoad),registerOnPageLoad(menuPage,onMenuPageLoad);var hasLoadedOnce=!1;window.onload=function(){console.log("onload(): Current Page",getCurrentPage()),onLoad(),hasLoadedOnce||(hasLoadedOnce=!0)},window.onresize=function(){pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onPageResize&&pageHandlers[getCurrentPage()].onPageResize()};var routeTo=function(e,n,t){e||(e=landingPage),animStack.push(!0),n?($("#"+e).css("left","100%"),$("#"+e).css("top","0"),$("#"+n).animate({left:"-100%"},900),$("#"+e).animate({left:"0"},900)):(pageIds.forEach(function(e,n,t){$("#"+e).css("left","-100%"),$("#"+e).css("top","0")}),$("#"+e).css("left","-100%"),$("#"+e).animate({left:"0px"},900)),window.history.pushState("Object",e,"#!/"+e),runOnPageLoadFunctions(),setTimeout(function(){animStack.pop(),runOnPagePostLoadFunctions()},600)},routeToSlideUp=function(e,n,t){e||(e=landingPage),animStack.push(!0),n?($("#"+e).css("top","100%"),$("#"+e).css("left","0"),$("#"+n).animate({top:"-100%"},"slow"),$("#"+e).animate({top:"0"},"slow")):(pageIds.forEach(function(e,n,t){$("#"+e).css("top","100%"),$("#"+e).css("left","0")}),$("#"+e).css("top","100%"),$("#"+e).animate({top:"0px"},"slow")),window.history.pushState("Object",e,"#!/"+e),runOnPageLoadFunctions(),setTimeout(function(){animStack.pop(),runOnPagePostLoadFunctions()},600)},captionLength=0,caption="",captionEl=$("#introHeader"),currentPage=0,typingCallbackCalled=!1;setTimeout(function(){$("#cursor").text("|"),setInterval(cursorAnimation,600)},1e3),$(".hover").bind("touchstart touchend",function(e){e.preventDefault(),$(this).toggleClass("hover_effect")}),$("#voidwaybtn").width($("#btnContent").width()),$("#voidwaybtn").hover(function(e){$("#voidwaybtn").animate({width:"150px"},"fast",function(){$("#btnContent").html('<span class="fadein">the void way -><span>')})},function(e){$("#btnContent").html('<div id="circle" class="fadein"></div>').fadeIn("fast"),$("#voidwaybtn").animate({width:"42px"},"fast")}),$("#voidwaybtn").click(function(){routeTo(menuPage,landingPage)});var getCurrentPage=function(){var e=window.location.href,n=e.indexOf("#!/")==-1?null:e.substr(e.indexOf("#!/")+3,e.length-e.indexOf("#"));return n?n:landingPage},transition=function(e,n,t){var o;switch(e){case"slide-left":o="left";break;case"slide-up":o="top";break;default:o="left"}var a={};a[o]="-100%"},directLoad=function(e){pageIds.forEach(function(e,n,t){$("#"+e).css("left","100%")}),$("#"+e).css("left","0px")},MOUSE_OVER=!1;$("body").bind("mousewheel",function(e){if(MOUSE_OVER)return e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1}),$("#"+projectPage).mouseenter(function(){MOUSE_OVER=!0}),$("#"+projectPage).mouseleave(function(){MOUSE_OVER=!1}),$("#"+projectPage).bind("mousewheel",function(e){var n;n=e.wheelDelta?e.wheelDelta:e.originalEvent.wheelDelta,n>0?(console.log("Up"),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onUpScroll&&pageHandlers[getCurrentPage()].onUpScroll()):(console.log("Down",animStack),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onDownScroll&&pageHandlers[getCurrentPage()].onDownScroll())});var projects={Drone:{image:"../img/drone1.png",description:"Drone project description here."},Emoi:{image:"../img/b.jpg",description:"Emotion based feedback"},"Testimonial Map":{image:"../img/a.jpg",description:"Service Center testimonial feedback"},Other:{image:"../img/c.jpg",description:"Other"}},animStack=[];$(document).keyup(function(e){pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onKeyPress&&pageHandlers[getCurrentPage()].onKeyPress(e)}),registerOnPageLoad(projectPage,function(){var e=[{id:1,top:25,text:"Drone",middle:!1,element:null},{id:2,top:50,text:"Emoi",middle:!0,element:null},{id:3,top:75,text:"Testimonial Map",middle:!1,element:null},{id:4,top:100,text:"Other",middle:!1,element:null}],n=document.getElementById("project-canvas"),t=new paper.PaperScope;t.setup(n);var o=new t.Path;o.strokeColor="white";var a=xPositions["menu-projects"]?xPositions["menu-projects"]:.334*window.innerWidth,i=new t.Path,r=new t.Path;i.strokeColor="grey",r.strokeColor="grey";var c=0,s=0,g=1;t.view.onFrame=function(e){};var u=function(n){var t=projects[n];animStack.push(!0),$("#project-image").fadeOut(100,function(e){$("#project-image").css("background-image","url("+t.image+")"),$("#project-image").fadeIn(200,function(e){animStack.pop()})}),$("#project-title").fadeOut(100,function(){$("#project-title").text(n),$("#project-title").fadeIn(200,function(e){})}),$("#project-details").fadeOut(100,function(){$("#project-details").text(t.description),$("#project-details").fadeIn(200,function(e){})}),$("#next-project").fadeOut(100,function(){$("#next-project").text(e[g].text),$("#next-project").fadeIn(200,function(e){})})},l=function(){console.log("Project Menu loading"),$("#next-project").css("left",a-$("#next-project").width()/2),u(e[c].text)};l(),console.log($("#next-project").offset().top),i.moveTo(a,0),i.lineTo(a,$("#next-project").offset().top-10),r.moveTo(a,$("#next-project").offset().top+$("#next-project").height()+10),r.lineTo(a,window.innerHeight);var d=function(){s-=1,Math.abs(s)==e.length&&(s=0),c=Math.abs(s),g=(c+1)%e.length,l()},m=function(){g=c,c=(c+1)%e.length,s=c,l()};pageHandlers[projectPage]={onKeyPress:function(e){switch(e.which){case 38:0==animStack.length&&m();break;case 40:0==animStack.length&&d()}},onUpScroll:m,onDownScroll:d,onPageResize:function(){window.location.reload(!0)}},registerPagePostLoad(projectPage,function(){i.removeSegments(),r.removeSegments(),i.moveTo(a,0),i.lineTo(a,$("#next-project").offset().top-10),r.moveTo(a,$("#next-project").offset().top+$("#next-project").height()+10),r.lineTo(a,window.innerHeight)})});var menuCanvas=document.getElementById("menu-canvas"),menuPaper=new paper.PaperScope;menuPaper.setup(menuCanvas);var path=new menuPaper.Path;path.strokeColor="white";var animateLine=!1,menuItemClicked=null;menuPaper.view.onFrame=function(e){if(animateLine&&(path.segments[1].point=path.segments[1].point.add(new Point(0,10)),path.segments[1].point.y>window.innerHeight))switch(animateLine=!1,menuItemClicked){case"menu-projects":routeToSlideUp(projectPage,menuPage);break;case"menu-art":routeToSlideUp("misc",menuPage);break;case"menu-about":routeToSlideUp("about",menuPage);break;case"menu-dance":routeToSlideUp("dance",menuPage)}};var menuPageItems=["menu-home","menu-projects","menu-about","menu-dance","menu-art","menu-contact"];$("#menu-projects").click(function(){});var xPositions={};menuPageItems.forEach(function(e){$("#"+e).click(function(n){var t=$("#"+e);xPositions[e]=t.offset().left+t.width()/2,console.log(xPositions),animateLine||(path.add(new Point(t.offset().left+t.width()/2,t.offset().top+t.height())),path.add(new Point($("#"+e).offset().left+t.width()/2,$("#menu-home").offset().top+t.height()))),animateLine=!0,menuItemClicked=e}),$("#"+e).hover(function(){animateLine=!1,path.removeSegments()})}),menuPageItems.forEach(function(e,n){var t=$("#"+e);t.hover(function(n){0==animStack.length&&$("#menu-image").css("background-image").indexOf(e)==-1&&(animStack.push(!0),$("#menu-image").fadeOut(100,function(){$("#menu-image").css("background-image","url(../img/"+e+".png)"),$("#menu-image").fadeIn(400,function(){animStack.pop()})}))})});var preventMainMouseBind=!1;$("#misc").bind("mousewheel",function(e){var n;n=e.wheelDelta?e.wheelDelta:e.originalEvent.wheelDelta,n>0?(console.log("Up",animStack),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onUpScroll&&!preventMainMouseBind&&pageHandlers[getCurrentPage()].onUpScroll()):(console.log("Down"),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onDownScroll&&!preventMainMouseBind&&pageHandlers[getCurrentPage()].onDownScroll())}),$("#misc-photos").bind("mousewheel",function(e){var n;n=e.wheelDelta?e.wheelDelta:e.originalEvent.wheelDelta,animStack.push(!0),n>0?(console.log("Up",animStack),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onUpScroll&&pageHandlers[getCurrentPage()].onUpScroll()):(console.log("Down 2"),0==animStack.length&&pageHandlers[getCurrentPage()]&&pageHandlers[getCurrentPage()].onDownScroll&&pageHandlers[getCurrentPage()].onDownScroll()),animStack.pop()}),$("#misc-photos").mouseenter(function(){preventMainMouseBind=!0}),$("#misc-photos").mouseleave(function(){preventMainMouseBind=!1}),$("#misc").mouseenter(function(){MOUSE_OVER=!0}),$("#misc").mouseleave(function(){MOUSE_OVER=!1}),registerOnPageLoad(miscPage,function(){var e=document.getElementById("misc-canvas"),n=new paper.PaperScope;n.setup(e);var t=new n.Path,o=new n.Path,a=xPositions["menu-art"]?xPositions["menu-art"]:.671*window.innerWidth;$("#misc-side-image").css({left:window.innerWidth-$("#misc-side-image").width()}),$("#misc-side-title").css({width:window.innerWidth-a,height:window.innerHeight/2}),t.strokeColor="grey",o.strokeColor="grey",n.view.onFrame=function(){};var i=["Photography","Art","Writing"],r={Photography:"#misc-photos",Art:"#misc-art",Writing:"#misc-writing"},c=0,s=0,g=1,u=["#misc-photos","#misc-art","#misc-writing"],l=function(){var e=["#misc-menu-heading","#misc-side-title"];e.forEach(function(e){animStack.push(!0),$(e).fadeOut(200,function(){$("#misc-menu-heading").text(i[g]),$("#misc-menu-heading").css("left",a-$("#misc-menu-heading").width()/2),$("#misc-side-title").text(i[c]),$(e).fadeIn(400,function(){animStack.pop()})})});var n=r[i[c]];u.forEach(function(e){n!=e&&$(e).fadeOut(200)}),$(n).fadeIn(400)};l(),t.moveTo(a,0),t.lineTo(a,$("#misc-menu-heading").offset().top-10),o.moveTo(a,$("#misc-menu-heading").offset().top+$("#misc-menu-heading").height()+10),o.lineTo(a,window.innerHeight);var d=function(){g=c,c=(c+1)%i.length,s=c,l()},m=function(){s-=1,Math.abs(s)==i.length&&(s=0),c=Math.abs(s),g=(c+1)%i.length,l()};pageHandlers.misc={onPageResize:function(){window.location.reload(!0)},onKeyPress:function(e){switch(e.which){case 38:0==animStack.length&&d();break;case 40:0==animStack.length&&m()}},onUpScroll:d,onDownScroll:m},$("#grid").masonry({itemSelector:".grid-item"}),registerPagePostLoad(miscPage,function(){t.removeSegments(),o.removeSegments(),t.moveTo(a,0),t.lineTo(a,$("#misc-menu-heading").offset().top-10),o.moveTo(a,$("#misc-menu-heading").offset().top+$("#misc-menu-heading").height()+10),o.lineTo(a,window.innerHeight)})}),registerOnPageLoad("dance",function(){var e=document.getElementById("dance-canvas"),n=new paper.PaperScope;n.setup(e);var t=new n.Path,o=(new n.Path,xPositions["menu-dance"]?xPositions["menu-dance"]:.671*window.innerWidth);t.moveTo(o,0),t.lineTo(o,window.innerHeight),t.strokeColor="grey"}),registerOnPageLoad("about",function(){var e=document.getElementById("about-canvas"),n=new paper.PaperScope;n.setup(e);var t=new n.Path,o=(new n.Path,xPositions["menu-about"]?xPositions["menu-about"]:window.innerWidth/2);console.log(o,window.innerWidth),t.moveTo(o,0),t.lineTo(o,window.innerHeight),t.strokeColor="grey",pageHandlers[aboutPage]={onPageResize:function(){window.location.reload()}},registerPagePostLoad(aboutPage,function(){console.log("Test"),o=window.innerWidth/2-20,t.removeSegments(),t.moveTo(o,0),t.lineTo(o,window.innerHeight)})});